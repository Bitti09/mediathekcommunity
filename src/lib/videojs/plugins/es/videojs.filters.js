/**
 * Copyright (c) 2023 The Nuevodevel Team. All rights reserved.
 * Filters plugin for video.js
 * Version 1.2.0
 */
/* eslint-disable */import videojs from"video.js";var supportsPassive=!1;function fint(e){return e}var opts=Object.defineProperty({},"passive",{get:function(){supportsPassive=!0;return!0}});window.addEventListener("testPassive",null,opts);window.removeEventListener("testPassive",null,opts);var filter_b=100,filter_s=100,filter_c=100;const onMenusReady=(e,t)=>{const i={filtersMenu:!0};let s=100,r=100,a=100,l=e.el();try{t=videojs.obj.merge(i,t)}catch(e){t=videojs.mergeOptions(i,t)}if(t.filtersMenu){let t=videojs.dom.createEl("li",{className:"vjs-settings-item vjs-filters-button"},{tabIndex:0,"aria-label":e.localize("Open filters container"),role:"menuitem","aria-disabled":"false"});t.innerHTML=e.localize("Filters")+'<span><span class="vjs-filters-icon vjs-icon-placeholder" data-id="filters" aria-hidden="true"></span></span>';let i=l.querySelector(".vjs-settings-list");if(i){if(i.children.length>0)i.insertBefore(t,i.firstChild.nextSibling);else{i.appendChild(t);videojs.dom.removeClass(l.querySelector(".vjs-cog-menu-button"),"vjs-hidden")}}let h=videojs.dom.createEl("div",{className:"vjs-filters vjs-hidden"},{"aria-label":e.localize("Video filters"),"aria-hidden":!0});h.style.zIndex=7;let m=videojs.dom.createEl("div",{className:"vjs-filter-body vjs-filter-brightness"},{tabindex:0,"aria-live":"polite",role:"slider","aria-valuetext":"50%","aria-valuenow":50,"aria-valuemin":0,"aria-valuemax":100});m.setAttribute("aria-label","video brigtness");let j=videojs.dom.createEl("div",{className:"vjs-filter-body vjs-filter-saturation"},{tabindex:0,"aria-live":"polite",role:"slider","aria-valuetext":"50%","aria-valuenow":50,"aria-valuemin":0,"aria-valuemax":100});j.setAttribute("aria-label","video saturation");let y=videojs.dom.createEl("div",{className:"vjs-filter-body vjs-filter-contrast"},{tabindex:0,"aria-live":"polite",role:"slider","aria-valuetext":"50%","aria-valuenow":50,"aria-valuemin":0,"aria-valuemax":100});y.setAttribute("aria-label","video contrast");let b='<div class="vjs-filter-bar"><div class="vjs-filter-level"></div><div class="filter-tip"></div></div>';m.innerHTML='<span aria-hidden="true" data-id="brightness" class="vjs-icon-placeholder"></span>'+b;j.innerHTML='<span aria-hidden="true" data-id="saturation" class="vjs-icon-placeholder"></span>'+b;y.innerHTML='<span aria-hidden="true" data-id="contrast" class="vjs-icon-placeholder"></span>'+b;let w=videojs.dom.createEl("button",{className:"filter-btn filter-close"},{tabindex:0,"aria-disabled":!1,"aria-label":e.localize("Close filters")},e.localize("Close")),g=videojs.dom.createEl("button",{className:"filter-btn filter-reset"},{tabindex:0,"aria-disabled":!1,"aria-label":e.localize("Reset filters")},e.localize("Reset"));h.appendChild(m);h.appendChild(j);h.appendChild(y);h.appendChild(g);h.appendChild(w);function o(t){let i=t.which;if(27===i)w.click();if(37===i||39===i){var l=document.activeElement;if(l===m||l===j||l===y){let t=l.querySelector(".vjs-filter-level"),d=parseInt(t.style.width);if(!t.style.width)d=50;if(39===i)if((d+=5)>99)d=100;if(37===i)if((d-=5)<0)d=0;t.style.width=d+"%";var o=100+2*(d-50);if(l===m)s=o;if(l===j)r=o;if(l===y)a=o;var n="";if(100!==s)n="brightness("+s+"%)";if(100!==r){if(""!==n)n+=" ";n+="saturate("+r+"%)"}if(100!==a){if(""!==n)n+=" ";n+="contrast("+a+"%)"}l.querySelector(".filter-tip").innerText=d;l.setAttribute("aria-valuetext",d+"%");l.setAttribute("aria-valuenow",d);let v=e.el_.querySelector(".vjs-tech");v.style.webkitFilter=n;v.style.filter=n}}if(9===i){let e=document.activeElement;if(w==e){m.focus();t.preventDefault()}else if(e!==m&&e!==j&&e!==y&&e!==g)t.preventDefault()}}l.appendChild(h);h.addEventListener("keydown",o);t.onkeydown=function(e){setTimeout(function(){m.focus()},150)};var n=function(e){let t=L,i=t.querySelector(".vjs-filter-bar"),o=null;if("mousemove"===e.type||"mousedown"===e.type)o=e.clientX||null;else if("touchmove"===e.type||"touchstart"===e.type)o=e.touches[0].pageX||null;if(null===o)return;o=parseInt(o,10);var n=i.getBoundingClientRect(),d=i.offsetWidth,v=o-(n.left-window.scrollX);if(v>d)v=d;if(v<0)v=0;var u=parseInt(v/d*100,10);if(u<0)u=0;if(u>100)u=100;t.querySelector(".vjs-filter-level").style.width=u+"%";let c=t.querySelector(".filter-tip");videojs.dom.addClass(c,"tip-show");c.style.left=d*(u/100)-c.offsetWidth/2+"px";let f=l.querySelector(".vjs-brightness-bar");if(f)f.querySelector(".bar-level").style.height=u+"%";vv=2*(u-50);var p=2*(u-50);if(p<-100)p=-100;if(p>100)p=100;var b=100+2*(u-50);c.innerText=u;t.setAttribute("aria-valuetext",u+"%");t.setAttribute("aria-valuenow",u);if(L===m)s=b;if(L===j)r=b;if(L===y)a=b;var w="";if(100!==s)w="brightness("+s+"%)";if(100!==r){if(""!==w)w+=" ";w+="saturate("+r+"%)"}if(100!==a){if(""!==w)w+=" ";w+="contrast("+a+"%)"}let g=l.querySelector(".vjs-tech");g.style.webkitFilter=h;g.style.filter=w},d=function(t){t.preventDefault();t.stopPropagation();let i=e.el_.querySelector(".vjs-filters");i.setAttribute("aria-hidden","true");i.classList.add("vjs-hidden");e.$(".vjs-tech").style.removeProperty("pointer-events");e.el_.classList.remove("vjs-filters-on");setTimeout(function(){e.el_.focus();t.preventDefault();t.stopPropagation()},100);e.userActive(!1)},v=function(t){t.preventDefault();t.stopPropagation();videojs.dom.removeClass(h,"vjs-hidden");h.setAttribute("aria-hidden","false");e.trigger("filters");e.$(".vjs-tech").style.setProperty("pointer-events","none");videojs.dom.addClass(l,"vjs-filters-on");let i=l.querySelector(".vjs-sharing-overlay"),s=l.querySelector(".vjs-grid");if(i)videojs.dom.addClass(i,"vjs-hidden");if(s)videojs.dom.addClass(s,"vjs-hidden");let r=l.querySelector(".vjs-menu-settings");setTimeout(function(){videojs.dom.removeClass(r,"vjs-lock-showing");videojs.dom.addClass(r,"vjs-hidden");h.focus()},500)},u=function(e){e.preventDefault();e.stopPropagation();s=100;a=100;r=100;l.querySelector(".vjs-tech").removeAttribute("style");m.querySelector(".vjs-filter-level").style.width="50%";j.querySelector(".vjs-filter-level").style.width="50%";y.querySelector(".vjs-filter-level").style.width="50%"},c=function(e){e.stopPropagation();let t=e.target;L=t;n(e);window.addEventListener("mousemove",f,!1);window.addEventListener("mouseup",p,!1);window.addEventListener("touchmove",f,{passive:!1});L.addEventListener("touchend",p)},f=function(e){e.preventDefault();n(e)},p=function(e){e.preventDefault();videojs.dom.removeClass(l,"vjs-touch-active");videojs.dom.removeClass(L.querySelector(".filter-tip"),"tip-show");window.removeEventListener("mousemove",f);window.removeEventListener("mouseup",p);window.removeEventListener("touchmove",f);L.removeEventListener("touchend",p)};g.addEventListener("click",u,!1);g.addEventListener("touchend",u,!1);w.addEventListener("click",d,!1);w.addEventListener("touchend",d,!1);let E=l.querySelector(".vjs-filters-button");E.addEventListener("click",v,!1);E.addEventListener("touchstart",v,supportsPassive?{passive:!1}:!1);let L=null;m.addEventListener("mousedown",c,!1);m.addEventListener("touchstart",c,supportsPassive?{passive:!0}:!1);j.addEventListener("mousedown",c,!1);j.addEventListener("touchstart",c,supportsPassive?{passive:!0}:!1);y.addEventListener("mousedown",c,!1);y.addEventListener("touchstart",c,supportsPassive?{passive:!0}:!1)}},onPlayerReady=(e,t)=>{const i={touchBrightness:!0};try{t=videojs.obj.merge(i,t)}catch(e){t=videojs.mergeOptions(i,t)}videojs.dom;let s=e.el();if(!0===t.touchBrightness){var r=videojs.dom.createEl("div",{className:"vjs-brightness"},{tabindex:0,"aria-live":"polite",role:"slider","aria-valuetext":"50%","aria-valuenow":50,"aria-valuemin":0,"aria-valuemax":100});r.innerHTML='<span data-id="brightness" class="vjs-icon-placeholder"></span><div class="vjs-brightness-bar"><div class="bar"></div><div class="bar-level"></div></div>';s.appendChild(r);r.setAttribute("aria-label","Video brightness");r.addEventListener("touchstart",function(e){e.stopImmediatePropagation();videojs.dom.addClass(s,"vjs-touch-active");o(e);window.addEventListener("touchmove",a,{passive:!1});r.addEventListener("touchend",l)},supportsPassive?{passive:!0}:!1);return this}function a(t){t.preventDefault();t.stopImmediatePropagation();clearInterval(e.touchtimer);videojs.dom.addClass(s,"vjs-touch-acitve");o(t)}function l(t){t.preventDefault();e.touchtimer=setTimeout(function(){videojs.dom.removeClass(s,"vjs-touch-active")},1e3);window.removeEventListener("touchmove",a);r.removeEventListener("touchend",l)}function o(e){let t=null;if("mousemove"===e.type||"mousedown"===e.type)t=e.pageY||null;else if("touchmove"===e.type||"touchstart"===e.type)t=e.touches[0].pageY||null;if(null===t)return;var i=r.offsetHeight,a=t-(r.getBoundingClientRect().top+window.scrollY);if(a>i)a=i;if(a<0)a=0;var l=parseInt(100-a/i*100,10);if(l<0)l=0;if(l>100)l=100;r.querySelector(".bar-level").style.height=l+"%";r.setAttribute("aria-valuenow",l);r.setAttribute("aria-valuetext",l+"%");let o=s.querySelector(".vjs-filters");if(o){let e=o.querySelector(".vjs-filter-brightness");if(e){e.querySelector(".vjs-filter-level").style.width=l+"%";e.setAttribute("aria-valuenow",l);e.setAttribute("aria-valuetext",l+"%")}}if(100!==(filter_b=100+2*(l-50)))filterss="brightness("+filter_b+"%)";if(100!==filter_s){if(""!==filterss)filterss+=" ";filterss+="saturate("+filter_s+"%)"}if(100!==filter_c){if(""!==filterss)filterss+=" ";filterss+="contrast("+filter_c+"%)"}s.querySelector(".vjs-tech").style.webkitFilter=filterss;s.querySelector(".vjs-tech").style.filter=filterss}},filters=function(e){this.ready(()=>{onPlayerReady(this,e)});this.on("menusReady",function(){onMenusReady(this,e)})};if("undefined"!=typeof window)videojs.registerPlugin("filters",filters);export default filters;
